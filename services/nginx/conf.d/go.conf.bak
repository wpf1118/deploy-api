server {
    listen       80;
    listen       443 ssl;
    server_name  www.zzrs.xyz zzrs.xyz 127.0.0.1;
#     server_name 127.0.0.1;
    access_log  /var/log/nginx/a.log;
    ssl_certificate /ssl/www.zzrs.xyz_bundle.crt;
    ssl_certificate_key /ssl/www.zzrs.xyz.key;
    ssl_session_timeout 5m;

    index  index.html index.htm index.php;
    root /data/www/shop-admin/public;

    autoindex  on;
    location / {
        try_files $uri $uri/ /index.php$uri?$query_string;
    }
    location ~ \.php(.*)$ {
        fastcgi_pass   php:9000;
        fastcgi_index index.php;
        fastcgi_split_path_info  ^((?U).+\.php)(/?.+)$;
        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
        fastcgi_param  PATH_INFO  $fastcgi_path_info;
        fastcgi_param  PATH_TRANSLATED  $document_root$fastcgi_path_info;
        include fastcgi_params;
    }
    location ~ /\.(?!well-known).* {
        deny all;
    }

    location ^~ /api {
        proxy_pass http://$server_name:9999;
        proxy_redirect off;
    }

    location ~* \.(jpg|ico|icon|jpeg|png)$ {
        root   /data;
        index  index.html index.htm;
    }
}
